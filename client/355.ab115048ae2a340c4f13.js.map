{"version":3,"file":"355.ab115048ae2a340c4f13.js","mappings":"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","sources":["webpack://@mattermost/webapp/./components/common/svg_images_components/laptop_alert_svg.tsx","webpack://@mattermost/webapp/./components/do_verify_email/do_verify_email.tsx","webpack://@mattermost/webapp/./components/header_footer_route/content_layouts/column.tsx"],"sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\n/* eslint-disable max-lines */\nimport React from 'react';\n\ntype SvgProps = {\n    width?: number;\n    height?: number;\n}\n\nconst Svg = (props: SvgProps) => (\n    <svg\n        width={props.width?.toString() || '246'}\n        height={props.height?.toString() || '182'}\n        viewBox='0 0 246 182'\n        fill='none'\n        xmlns='http://www.w3.org/2000/svg'\n    >\n        <path\n            d='M22.7549 148.149H223.245C224.72 148.128 226.127 147.512 227.158 146.436C228.189 145.359 228.759 143.911 228.744 142.407V5.84874C228.759 4.34474 228.189 2.89609 227.158 1.81987C226.127 0.743655 224.72 0.127555 223.245 0.106445H22.7549C21.2803 0.12965 19.8745 0.746388 18.8443 1.82215C17.814 2.89791 17.243 4.34537 17.2556 5.84874V142.415C17.245 143.917 17.817 145.362 18.8471 146.436C19.8771 147.51 21.2817 148.126 22.7549 148.149Z'\n            fill='var(--center-channel-color)'\n        />\n        <path\n            d='M0.638184 167.787C0.638184 174.585 6.16258 181.383 12.8629 181.383H233.145C239.458 181.383 245.362 174.601 245.362 167.787H0.638184Z'\n            fill='#24262E'\n        />\n        <path\n            d='M224.969 148.149H21.0311L0.638184 167.787H245.362L224.969 148.149Z'\n            fill='#D1D4DB'\n        />\n        <path\n            d='M218.87 149.66H27.1217L20.2764 157.968H225.723L218.87 149.66Z'\n            fill='#AFB3C0'\n        />\n        <path\n            d='M144.023 160.989H101.985L98.8296 165.521H147.17L144.023 160.989Z'\n            fill='#24262E'\n        />\n        <rect\n            width='187.319'\n            height='120.851'\n            transform='translate(29.3403 12.9468)'\n            fill='#505667'\n        />\n        <path\n            d='M88.8224 110.383C84.491 110.383 82.5285 107.261 84.4612 103.445L119.469 34.6773C121.452 30.8712 124.574 30.8712 126.516 34.6773L161.515 103.445C163.497 107.251 161.515 110.383 157.154 110.383H88.8224Z'\n            fill='var(--away-indicator)'\n        />\n        <path\n            d='M117.497 60.1105L121.095 84.2851C121.13 84.7648 121.345 85.2136 121.697 85.5412C122.049 85.8688 122.512 86.0509 122.993 86.0509C123.474 86.0509 123.937 85.8688 124.289 85.5412C124.642 85.2136 124.857 84.7648 124.891 84.2851L128.489 60.1105C129.143 50.6845 116.833 50.6845 117.497 60.1105Z'\n            fill='#2D3039'\n        />\n        <path\n            d='M122.988 88.6563C124.078 88.6582 125.142 88.9831 126.047 89.5898C126.952 90.1966 127.657 91.0579 128.072 92.0651C128.488 93.0722 128.596 94.18 128.382 95.2483C128.168 96.3167 127.643 97.2977 126.871 98.0674C126.1 98.8372 125.118 99.361 124.05 99.5729C122.981 99.7847 121.873 99.675 120.867 99.2576C119.861 98.8402 119 98.1339 118.395 97.2278C117.79 96.3218 117.467 95.2567 117.467 94.1672C117.467 93.4426 117.61 92.7252 117.888 92.0559C118.165 91.3867 118.572 90.7787 119.085 90.2668C119.598 89.755 120.206 89.3493 120.876 89.0729C121.546 88.7965 122.264 88.655 122.988 88.6563Z'\n            fill='#2D3039'\n        />\n        <path\n            d='M123 3.88281C123.597 3.88281 124.181 4.06002 124.678 4.392C125.175 4.72398 125.562 5.19583 125.791 5.7479C126.02 6.29996 126.08 6.90744 125.963 7.49351C125.846 8.07958 125.559 8.61792 125.136 9.04045C124.714 9.46299 124.175 9.75075 123.589 9.86732C123.003 9.9839 122.396 9.92404 121.844 9.69537C121.292 9.46669 120.82 9.07947 120.488 8.58263C120.156 8.08578 119.979 7.50164 119.979 6.90409C119.979 6.1028 120.297 5.33432 120.863 4.76772C121.43 4.20112 122.199 3.88281 123 3.88281Z'\n            fill='#DDDFE4'\n        />\n        <path\n            d='M140.405 176.851H104.815C103.587 176.851 100.34 176.851 100.34 172.319H144.904C144.904 176.851 141.562 176.851 140.405 176.851Z'\n            fill='var(--center-channel-color)'\n        />\n    </svg>\n);\n\nexport default Svg;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {useState, useEffect} from 'react';\nimport {useIntl} from 'react-intl';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {useLocation, useHistory} from 'react-router-dom';\n\nimport {redirectUserToDefaultTeam} from 'actions/global_actions';\nimport {trackEvent} from 'actions/telemetry_actions.jsx';\n\nimport LaptopAlertSVG from 'components/common/svg_images_components/laptop_alert_svg';\nimport ColumnLayout from 'components/header_footer_route/content_layouts/column';\nimport LoadingScreen from 'components/loading_screen';\n\nimport {clearErrors, logError} from 'mattermost-redux/actions/errors';\nimport {verifyUserEmail, getMe} from 'mattermost-redux/actions/users';\nimport {getUseCaseOnboarding} from 'mattermost-redux/selectors/entities/preferences';\nimport {getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\nimport {DispatchFunc} from 'mattermost-redux/types/actions';\n\nimport {AnnouncementBarTypes, AnnouncementBarMessages, Constants} from 'utils/constants';\n\nimport './do_verify_email.scss';\n\nconst enum VerifyStatus {\n    PENDING = 'pending',\n    SUCCESS = 'success',\n    FAILURE = 'failure',\n}\n\nconst DoVerifyEmail = () => {\n    const {formatMessage} = useIntl();\n    const dispatch = useDispatch<DispatchFunc>();\n    const history = useHistory();\n    const {search} = useLocation();\n\n    const params = new URLSearchParams(search);\n    const token = params.get('token') ?? '';\n\n    const loggedIn = Boolean(useSelector(getCurrentUserId));\n    const useCaseOnboarding = useSelector(getUseCaseOnboarding);\n\n    const [verifyStatus, setVerifyStatus] = useState(VerifyStatus.PENDING);\n    const [serverError, setServerError] = useState('');\n\n    useEffect(() => {\n        verifyEmail();\n    }, []);\n\n    const handleRedirect = () => {\n        if (loggedIn) {\n            if (useCaseOnboarding) {\n                // need info about whether admin or not,\n                // and whether admin has already completed\n                // first time onboarding. Instead of fetching and orchestrating that here,\n                // let the default root component handle it.\n                history.push('/');\n                return;\n            }\n\n            redirectUserToDefaultTeam();\n            return;\n        }\n\n        const newSearchParam = new URLSearchParams(search);\n        newSearchParam.set('extra', Constants.SIGNIN_VERIFIED);\n\n        history.push(`/login?${newSearchParam}`);\n    };\n\n    const verifyEmail = async () => {\n        const {error} = await dispatch(verifyUserEmail(token));\n\n        if (error) {\n            setVerifyStatus(VerifyStatus.FAILURE);\n            setServerError(formatMessage({\n                id: 'signup_user_completed.invalid_invite.message',\n                defaultMessage: 'Please speak with your Administrator to receive an invitation.',\n            }));\n            return;\n        }\n\n        setVerifyStatus(VerifyStatus.SUCCESS);\n        await dispatch(clearErrors());\n\n        if (!loggedIn) {\n            handleRedirect();\n            return;\n        }\n\n        dispatch(logError({\n            message: AnnouncementBarMessages.EMAIL_VERIFIED,\n            type: AnnouncementBarTypes.SUCCESS,\n        } as any, true));\n\n        trackEvent('settings', 'verify_email');\n\n        const {error: getMeError} = await dispatch(getMe());\n\n        if (getMeError) {\n            setVerifyStatus(VerifyStatus.FAILURE);\n            setServerError(formatMessage({\n                id: 'signup_user_completed.failed_update_user_state',\n                defaultMessage: 'Please clear your cache and try to log in.',\n            }));\n            return;\n        }\n\n        handleRedirect();\n    };\n\n    const handleReturnButtonOnClick = () => history.replace('/');\n\n    return (\n        verifyStatus === VerifyStatus.FAILURE ? (\n            <div className='do-verify-body'>\n                <div className='do-verify-body-content'>\n                    <ColumnLayout\n                        title={formatMessage({id: 'signup_user_completed.invalid_invite.title', defaultMessage: 'This invite link is invalid'})}\n                        message={serverError}\n                        SVGElement={<LaptopAlertSVG/>}\n                        extraContent={(\n                            <div className='do-verify-body-content-button-container'>\n                                <button\n                                    className='do-verify-body-content-button-return'\n                                    onClick={handleReturnButtonOnClick}\n                                >\n                                    {formatMessage({id: 'signup_user_completed.return', defaultMessage: 'Return to log in'})}\n                                </button>\n                            </div>\n                        )}\n                    />\n                </div>\n            </div>\n        ) : (\n            <LoadingScreen/>\n        )\n    );\n};\n\nexport default DoVerifyEmail;\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nimport Constants from 'utils/constants';\n\nimport './column.scss';\n\ntype ColumnProps = {\n    title: string;\n    message: string;\n    SVGElement?: React.ReactNode;\n    extraContent?: React.ReactNode;\n    onEnterKeyDown?: (e: React.KeyboardEvent<HTMLInputElement>) => void;\n}\n\nconst Column = ({title, message, SVGElement, extraContent, onEnterKeyDown}: ColumnProps) => {\n    const handleOnEnterKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n        if (onEnterKeyDown && e.key === Constants.KeyCodes.ENTER[0]) {\n            onEnterKeyDown(e);\n        }\n    };\n\n    return (\n        <div\n            className='content-layout-column'\n            onKeyDown={handleOnEnterKeyDown}\n            tabIndex={0}\n        >\n            <div className='content-layout-column-svg'>\n                {SVGElement}\n            </div>\n            <h1 className='content-layout-column-title'>\n                {title}\n            </h1>\n            <p className='content-layout-column-message'>\n                {message}\n            </p>\n            {extraContent && (\n                <div className='content-layout-column-extra-content'>\n                    {extraContent}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Column;\n"],"names":["Svg","props","width","toString","height","viewBox","fill","xmlns","d","transform","VerifyStatus","formatMessage","useIntl","dispatch","useDispatch","history","useHistory","search","useLocation","token","URLSearchParams","get","loggedIn","Boolean","useSelector","getCurrentUserId","useCaseOnboarding","getUseCaseOnboarding","verifyStatus","setVerifyStatus","useState","PENDING","serverError","setServerError","useEffect","verifyEmail","handleRedirect","push","redirectUserToDefaultTeam","newSearchParam","set","Constants","async","error","verifyUserEmail","FAILURE","id","defaultMessage","SUCCESS","clearErrors","logError","message","AnnouncementBarMessages","type","AnnouncementBarTypes","trackEvent","getMeError","getMe","className","title","SVGElement","extraContent","onClick","replace","Column","onEnterKeyDown","onKeyDown","e","key","tabIndex"],"sourceRoot":""}