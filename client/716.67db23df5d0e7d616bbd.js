"use strict";(self.webpackChunk_mattermost_webapp=self.webpackChunk_mattermost_webapp||[]).push([[716],{80463:(e,t,i)=>{i.d(t,{Z:()=>u});var l,s,n,o=i(14494),a=i(22742),r=i(81540),c=i(45697),d=i.n(c),m=i(67294),p=i(31055);class h extends m.PureComponent{render(){const e=this.props.fileInfo,t=this.props.fileUrl,i=[];""!==e.extension&&i.push(p._u("file_info_preview.type","File type ")+e.extension.toUpperCase()),e.size&&i.push(p._u("file_info_preview.size","Size ")+p.eA(e.size));const l=i.join(", ");let s=null;return s=this.props.canDownloadFiles?m.createElement("a",{className:"file-details__preview",href:t,target:"_blank",rel:"noopener noreferrer"},m.createElement("span",{className:"file-details__preview-helper"}),m.createElement("img",{alt:"file preview",src:p.c2(e)})):m.createElement("span",{className:"file-details__preview"},m.createElement("span",{className:"file-details__preview-helper"}),m.createElement("img",{alt:"file preview",src:p.c2(e)})),m.createElement("div",{className:"file-details__container"},s,m.createElement("div",{className:"file-details"},m.createElement("div",{className:"file-details__name"},e.name),m.createElement("div",{className:"file-details__info"},l)))}}l=h,s="propTypes",n={fileUrl:d().string.isRequired,canDownloadFiles:d().bool.isRequired},s in l?Object.defineProperty(l,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[s]=n;const u=(0,o.connect)((function(e){const t=(0,a.iE)(e);return{canDownloadFiles:(0,r.qL)(t)}}))(h)},3716:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ie});var l=i(45697),s=i.n(l),n=(i(88674),i(33948),i(67294)),o=i(43253),a=i(76960),r=i(54920),c=i(66788),d=i(31055),m=i(14494),p=i(61958),h=i(80463);function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f extends n.PureComponent{constructor(e){super(e),u(this,"sourceRef",n.createRef()),u(this,"videoRef",n.createRef()),u(this,"handleFileInfoChanged",(e=>{let t=this.videoRef.current;t||(t=document.createElement("video"));const i=t.canPlayType(e.mime_type);this.setState({canPlay:"probably"===i||"maybe"===i})})),u(this,"handleLoadError",(()=>{this.setState({canPlay:!1})})),u(this,"stop",(()=>{if(this.videoRef.current){const e=this.videoRef.current;e.pause(),e.currentTime=0}})),this.state={canPlay:!0}}componentDidMount(){this.handleFileInfoChanged(this.props.fileInfo),this.sourceRef.current&&this.sourceRef.current.addEventListener("error",this.handleLoadError,{once:!0})}componentDidUpdate(e){this.props.fileUrl!==e.fileUrl&&this.handleFileInfoChanged(this.props.fileInfo),this.sourceRef.current&&this.sourceRef.current.addEventListener("error",this.handleLoadError,{once:!0})}render(){if(!this.state.canPlay)return n.createElement(h.Z,{fileInfo:this.props.fileInfo,fileUrl:this.props.fileUrl});let e=c.ZP.WEB_VIDEO_WIDTH,t=c.ZP.WEB_VIDEO_HEIGHT;return this.props.isMobileView&&(e=c.ZP.MOBILE_VIDEO_WIDTH,t=c.ZP.MOBILE_VIDEO_HEIGHT),n.createElement("video",{key:this.props.fileInfo.id,ref:this.videoRef,"data-setup":"{}",controls:!0,width:e,height:t},n.createElement("source",{ref:this.sourceRef,src:this.props.fileUrl}))}}u(f,"propTypes",{fileUrl:s().string.isRequired,isMobileView:s().bool.isRequired});const E=(0,m.connect)((function(e){return{isMobileView:(0,p.E7)(e)}}))(f);var v=i(91986),g=i(56640);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class w extends n.PureComponent{constructor(e){super(e),_(this,"getCode",(async()=>{if(this.state.lang&&!(this.props.fileInfo.size>c.ZP.CODE_PREVIEW_MAX_FILE_SIZE))try{const e=await fetch(this.props.fileUrl),t=await e.text();this.handleReceivedCode(t)}catch(e){this.handleReceivedError()}})),_(this,"handleReceivedCode",(e=>{let t=e;"#document"===e.nodeName&&(t=(new XMLSerializer).serializeToString(e)),this.setState({code:t,loading:!1,success:!0})})),_(this,"handleReceivedError",(()=>{this.setState({loading:!1,success:!1})})),this.state={code:"",lang:"",loading:!0,success:!0}}componentDidMount(){this.getCode()}static getDerivedStateFromProps(e,t){if(e.fileUrl!==t.prevFileUrl){const t=v.iP(e.fileInfo.extension);return!t||e.fileInfo.size>c.ZP.CODE_PREVIEW_MAX_FILE_SIZE?{code:"",lang:"",loading:!1,success:!1,prevFileUrl:e.fileUrl}:{code:"",lang:t,loading:!0,prevFileUrl:e.fileUrl}}return null}componentDidUpdate(e){this.props.fileUrl!==e.fileUrl&&this.getCode()}static supports(e){return Boolean(v.iP(e.extension))}render(){if(this.state.loading)return n.createElement("div",{className:"view-image__loading"},n.createElement(g.Z,null));if(!this.state.success)return n.createElement(h.Z,{fileInfo:this.props.fileInfo,fileUrl:this.props.fileUrl});const e=v.vY(this.state.lang),t=v.CH(this.state.lang,this.state.code);return n.createElement("div",{className:"post-code code-preview"},n.createElement("span",{className:"post-code__language"},"".concat(this.props.fileInfo.name," - ").concat(e)),n.createElement("div",{className:"hljs"},n.createElement("div",{className:"post-code__line-numbers"},v.wj(this.state.code)),n.createElement("code",{dangerouslySetInnerHTML:{__html:t}})))}}function b(e){let t,i,{fileInfo:l,canDownloadFiles:s}=e;return l.id?(t=(0,a.gN)(l.id),i=l.has_preview_image?(0,a.iY)(l.id):t):(t=l.link,i=l.link),s?n.createElement("a",{className:"image_preview",href:"#"},n.createElement("img",{className:"image_preview__image","data-testid":"imagePreview",alt:"preview url image",src:i})):n.createElement("img",{src:i})}w.propTypes={fileInfo:s().object.isRequired,fileUrl:s().string.isRequired},b.propTypes={fileInfo:s().object.isRequired,canDownloadFiles:s().bool.isRequired},i(19601);var I=i(44012),y=i(9276),P=i(12707),C=i(67515);const L=(0,P.RX)(),R=e=>{const t=(0,m.useSelector)((t=>{var i,l;return(0,P.PR)(t,null!==(i=null===(l=e.post)||void 0===l?void 0:l.user_id)&&void 0!==i?i:"")})),i=(0,m.useSelector)((t=>{var i,l;return(0,y.kL)()(t,{id:null!==(i=null===(l=e.post)||void 0===l?void 0:l.channel_id)&&void 0!==i?i:""})})),l=(0,m.useSelector)((t=>{var i,l;return L(t,null!==(i=null===(l=e.post)||void 0===l?void 0:l.user_id)&&void 0!==i?i:"",!0)}));let s;const o=i?n.createElement(I.Z,{id:"file_preview_modal_info.shared_in",defaultMessage:"Shared in ~{name}",values:{name:i.display_name||i.name}}):null;return s=e.showFileName?n.createElement(n.Fragment,null,n.createElement("h5",{className:"file-preview-modal__file-name"},e.filename),n.createElement("span",{className:"file-preview-modal__file-details"},n.createElement("span",{className:"file-preview-modal__file-details-user-name"},l),n.createElement("span",{className:"file-preview-modal__channel"},o))):n.createElement(n.Fragment,null,n.createElement("h5",{className:"file-preview-modal__user-name"},l),n.createElement("span",{className:"file-preview-modal__channel"},o)),n.createElement("div",{className:"file-preview-modal__info"},e.post&&Object.keys(e.post).length>0&&n.createElement(C.Z,{size:"lg",url:(0,d.bb)(e.post.user_id,null==t?void 0:t.last_picture_update),className:"file-preview-modal__avatar"}),n.createElement("div",{className:"file-preview-modal__info-details"},s))};R.propTypes={showFileName:s().bool.isRequired,filename:s().string.isRequired};const N=(0,n.memo)(R);var Z=i(3930),k=i(51502),O=i(15558),x=i(89959);function M(e){return Boolean(e.id)}const F=e=>{const t="Header"===e.usedInside?"bottom":"top",i=(0,m.useSelector)((e=>{var t;return null===(t=(0,k.c9)(e))||void 0===t?void 0:t.link})),l=(0,m.useDispatch)(),[s,o]=(0,n.useState)(!1);(0,n.useEffect)((()=>{M(e.fileInfo)&&e.enablePublicLink&&l((0,Z.c9)(e.fileInfo.id))}),[e.fileInfo,e.enablePublicLink]);const a=n.createElement(O.Z,{delayShow:c.ZP.OVERLAY_TIME_DELAY,key:"publicLink",placement:t,overlay:n.createElement(x.Z,{id:"close-icon-tooltip"},n.createElement(I.Z,{id:"full_screen_modal.close",defaultMessage:"Close"}))},n.createElement("button",{className:"file-preview-modal-main-actions__action-item",onClick:e.handleModalClose},n.createElement("i",{className:"icon icon-close"})));let r=n.createElement(I.Z,{id:"view_image_popover.publicLink",defaultMessage:"Get a public link"});s&&(r=n.createElement(I.Z,{id:"file_preview_modal_main_actions.public_link-copied",defaultMessage:"Public link copied"}));const p=n.createElement(O.Z,{delayShow:c.ZP.OVERLAY_TIME_DELAY,key:"filePreviewPublicLink",placement:t,shouldUpdatePosition:!0,onExit:()=>o(!1),overlay:n.createElement(x.Z,{id:"link-variant-icon-tooltip"},r)},n.createElement("a",{href:"#",className:"file-preview-modal-main-actions__action-item",onClick:()=>{(0,d.vQ)(null!=i?i:""),o(!0)}},n.createElement("i",{className:"icon icon-link-variant"})));e.filename;const h=n.createElement(O.Z,{delayShow:c.ZP.OVERLAY_TIME_DELAY,key:"download",placement:t,overlay:n.createElement(x.Z,{id:"download-icon-tooltip"},n.createElement(I.Z,{id:"view_image_popover.download",defaultMessage:"Download"}))},n.createElement("a",{href:e.fileURL,className:"file-preview-modal-main-actions__action-item",target:"_blank",rel:"noopener noreferrer",download:e.filename},n.createElement("i",{className:"icon icon-download-outline"})));return n.createElement("div",{className:"file-preview-modal-main-actions__actions"},!e.showOnlyClose&&e.enablePublicLink&&e.showPublicLink&&p,!e.showOnlyClose&&e.canDownloadFiles&&h,e.showClose&&a)};F.propTypes={usedInside:s().oneOf(["Header","Footer"]),showOnlyClose:s().bool,showClose:s().bool,showPublicLink:s().bool,filename:s().string.isRequired,fileURL:s().string.isRequired,enablePublicLink:s().bool.isRequired,canDownloadFiles:s().bool.isRequired,handleModalClose:s().func.isRequired},F.defaultProps={showOnlyClose:!1,usedInside:"Header",showClose:!0,showPublicLink:!0};const D=(0,n.memo)(F),S=["post"];const q=e=>{let{post:t}=e,i=function(e,t){if(null==e)return{};var i,l,s=function(e,t){if(null==e)return{};var i,l,s={},n=Object.keys(e);for(l=0;l<n.length;l++)i=n[l],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)i=n[l],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}(e,S);return n.createElement("div",{className:"file-preview-modal-footer"},n.createElement(N,{showFileName:!1,post:t,filename:i.filename}),n.createElement(D,Object.assign({},i,{showClose:!1,usedInside:"Footer",showOnlyClose:!1})))};q.propTypes={filename:s().string.isRequired,fileURL:s().string.isRequired,showPublicLink:s().bool,enablePublicLink:s().bool.isRequired,canDownloadFiles:s().bool.isRequired,isExternalFile:s().bool.isRequired,handleModalClose:s().func.isRequired};const A=(0,n.memo)(q),T=e=>{const t=n.createElement(O.Z,{delayShow:c.ZP.OVERLAY_TIME_DELAY,key:"previewArrowLeft",placement:"bottom",overlay:n.createElement(x.Z,{id:"close-icon-tooltip"},n.createElement(I.Z,{id:"generic.previous",defaultMessage:"Close"}))},n.createElement("button",{id:"previewArrowLeft",className:"file_preview_modal_main_nav__prev",onClick:e.handlePrev},n.createElement("i",{className:"icon icon-chevron-left"}))),i=n.createElement(O.Z,{delayShow:c.ZP.OVERLAY_TIME_DELAY,key:"publicLink",placement:"bottom",overlay:n.createElement(x.Z,{id:"close-icon-tooltip"},n.createElement(I.Z,{id:"generic.next",defaultMessage:"Next"}))},n.createElement("button",{id:"previewArrowRight",className:"file_preview_modal_main_nav__next",onClick:e.handleNext},n.createElement("i",{className:"icon icon-chevron-right"})));return n.createElement("div",{className:"file_preview_modal_main_nav"},t,n.createElement("span",{className:"modal-bar-file-count"},n.createElement(I.Z,{id:"file_preview_modal_main_nav.file",defaultMessage:"{count, number} of {total, number}",values:{count:e.fileIndex+1,total:e.totalFiles}})),i)};T.propTypes={fileIndex:s().number.isRequired,totalFiles:s().number.isRequired,handlePrev:s().func.isRequired,handleNext:s().func.isRequired};const U=(0,n.memo)(T),j=["post","totalFiles","fileIndex"];const V=e=>{let{post:t,totalFiles:i,fileIndex:l}=e,s=function(e,t){if(null==e)return{};var i,l,s=function(e,t){if(null==e)return{};var i,l,s={},n=Object.keys(e);for(l=0;l<n.length;l++)i=n[l],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)i=n[l],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}(e,j),o=n.createElement("div",null);i>1&&(o=n.createElement(U,{totalFiles:i,fileIndex:l,handlePrev:s.handlePrev,handleNext:s.handleNext}));const a=n.createElement(D,Object.assign({},s,{showOnlyClose:s.isMobileView,usedInside:"Header"}));return n.createElement("div",{className:"file-preview-modal-header"},s.isMobileView&&a,!s.isMobileView&&n.createElement(N,{showFileName:!0,post:t,filename:s.filename}),o,!s.isMobileView&&a)};V.propTypes={isMobileView:s().bool.isRequired,fileIndex:s().number.isRequired,totalFiles:s().number.isRequired,filename:s().string.isRequired,fileURL:s().string.isRequired,showPublicLink:s().bool,enablePublicLink:s().bool.isRequired,canDownloadFiles:s().bool.isRequired,isExternalFile:s().bool.isRequired,handlePrev:s().func.isRequired,handleNext:s().func.isRequired,handleModalClose:s().func.isRequired};const z=(0,n.memo)(V);var Y,B,H,W=i(23279),G=i.n(W);class X extends n.PureComponent{render(){const e=[];let t=null;if(this.props.showZoomControls){let i,l,s;l=this.props.scale&&this.props.scale>c.v0.MIN_SCALE?n.createElement("span",{className:"modal-zoom-btn"},n.createElement("a",{onClick:this.props.handleZoomOut&&G()(this.props.handleZoomOut,300,{maxWait:300})},n.createElement("i",{className:"icon icon-minus"}))):n.createElement("span",{className:"btn-inactive"},n.createElement("i",{className:"icon icon-minus"})),e.push(n.createElement(O.Z,{delayShow:c.gT.OVERLAY_TIME_DELAY,key:"zoomOut",placement:"top",overlay:n.createElement(x.Z,{id:"zoom-out-icon-tooltip"},n.createElement(I.Z,{id:"view_image.zoom_out",defaultMessage:"Zoom Out"}))},l)),i=this.props.scale&&this.props.scale>c.v0.DEFAULT_SCALE?n.createElement("span",{className:"modal-zoom-btn"},n.createElement("a",{onClick:this.props.handleZoomReset},n.createElement("i",{className:"icon icon-magnify-minus"}))):this.props.scale&&this.props.scale<c.v0.DEFAULT_SCALE?n.createElement("span",{className:"modal-zoom-btn"},n.createElement("a",{onClick:this.props.handleZoomReset},n.createElement("i",{className:"icon icon-magnify-plus"}))):n.createElement("span",{className:"btn-inactive"},n.createElement("i",{className:"icon icon-magnify-minus"})),e.push(n.createElement(O.Z,{delayShow:c.gT.OVERLAY_TIME_DELAY,key:"zoomReset",placement:"top",overlay:n.createElement(x.Z,{id:"zoom-reset-icon-tooltip"},n.createElement(I.Z,{id:"view_image.zoom_reset",defaultMessage:"Reset Zoom"}))},i)),s=this.props.scale&&this.props.scale<c.v0.MAX_SCALE?n.createElement("span",{className:"modal-zoom-btn"},n.createElement("a",{onClick:this.props.handleZoomIn&&G()(this.props.handleZoomIn,300,{maxWait:300})},n.createElement("i",{className:"icon icon-plus"}))):n.createElement("span",{className:"btn-inactive"},n.createElement("i",{className:"icon icon-plus"})),e.push(n.createElement(O.Z,{delayShow:c.gT.OVERLAY_TIME_DELAY,key:"zoomIn",placement:"top",overlay:n.createElement(x.Z,{id:"zoom-in-icon-tooltip"},n.createElement(I.Z,{id:"view_image.zoom_in",defaultMessage:"Zoom In"}))},s)),t=n.createElement("div",{className:"modal-column"},e)}return n.createElement("div",{"data-testid":"fileCountFooter",ref:"imageFooter",className:"modal-button-bar file-preview-modal__zoom-bar"},t)}}Y=X,B="propTypes",H={scale:s().number,showZoomControls:s().bool,handleZoomIn:s().func,handleZoomOut:s().func,handleZoomReset:s().func},B in Y?Object.defineProperty(Y,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):Y[B]=H;const K=X;function J(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,l)}return i}function Q(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?J(Object(i),!0).forEach((function(t){$(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ee=n.lazy((()=>i.e(271).then(i.bind(i,78271)))),te=c.ZP.KeyCodes;class ie extends n.PureComponent{constructor(e){super(e),$(this,"handleNext",(()=>{let e=this.state.imageIndex+1;e>this.props.fileInfos.length-1&&(e=0),this.showImage(e)})),$(this,"handlePrev",(()=>{let e=this.state.imageIndex-1;e<0&&(e=this.props.fileInfos.length-1),this.showImage(e)})),$(this,"handleKeyPress",(e=>{d.pD(e,te.RIGHT)?this.handleNext():d.pD(e,te.LEFT)&&this.handlePrev()})),$(this,"showImage",(e=>{this.setState({imageIndex:e});const t=window.innerHeight-100;this.setState({imageHeight:t}),this.state.loaded[e]||this.loadImage(e)})),$(this,"loadImage",(e=>{const t=this.props.fileInfos[e];if(d.JB(t.extension)===c.ml.IMAGE&&M(t)){let i;i=t.has_preview_image?(0,a.iY)(t.id):(0,a.qm)(t.id),d.po(i,(()=>this.handleImageLoaded(e)),(t=>this.handleImageProgress(e,t)))}else this.handleImageLoaded(e)})),$(this,"handleImageLoaded",(e=>{this.setState((t=>({loaded:Q(Q({},t.loaded),{},{[e]:!0})})))})),$(this,"handleImageProgress",((e,t)=>{this.setState((i=>({progress:Q(Q({},i.progress),{},{[e]:t})})))})),$(this,"onMouseEnterImage",(()=>{this.setState({showCloseBtn:!0})})),$(this,"onMouseLeaveImage",(()=>{this.setState({showCloseBtn:!1})})),$(this,"setScale",((e,t)=>{this.setState((i=>({scale:Q(Q({},i.scale),{},{[e]:t})})))})),$(this,"handleZoomIn",(()=>{let e=this.state.scale[this.state.imageIndex];e=Math.min(e+c.v0.SCALE_DELTA,c.v0.MAX_SCALE),this.setScale(this.state.imageIndex,e)})),$(this,"handleZoomOut",(()=>{let e=this.state.scale[this.state.imageIndex];e=Math.max(e-c.v0.SCALE_DELTA,c.v0.MIN_SCALE),this.setScale(this.state.imageIndex,e)})),$(this,"handleZoomReset",(()=>{this.setScale(this.state.imageIndex,c.v0.DEFAULT_SCALE)})),$(this,"handleModalClose",(()=>{this.setState({show:!1})})),$(this,"handleBgClose",(e=>{e.currentTarget===e.target&&this.handleModalClose()})),this.state={show:!0,imageIndex:this.props.startIndex,imageHeight:"100%",loaded:d.kg(!1,this.props.fileInfos.length),prevFileInfosCount:0,progress:d.kg(0,this.props.fileInfos.length),showCloseBtn:!1,showZoomControls:!1,scale:d.kg(c.v0.DEFAULT_SCALE,this.props.fileInfos.length)}}componentDidMount(){document.addEventListener("keyup",this.handleKeyPress),this.showImage(this.props.startIndex)}componentWillUnmount(){document.removeEventListener("keyup",this.handleKeyPress)}static getDerivedStateFromProps(e,t){const i={};return e.fileInfos[t.imageIndex]&&e.fileInfos[t.imageIndex].extension===c.ml.PDF?i.showZoomControls=!0:i.showZoomControls=!1,e.fileInfos.length!==t.prevFileInfosCount&&(i.loaded=d.kg(!1,e.fileInfos.length),i.progress=d.kg(0,e.fileInfos.length),i.prevFileInfosCount=e.fileInfos.length),Object.keys(i).length?i:null}render(){var e;if(this.props.fileInfos.length<1||this.props.fileInfos.length-1<this.state.imageIndex)return null;const t=this.props.fileInfos[this.state.imageIndex],i=d.JB(t.extension);let l,s,m,p,u;M(t)?(l=!0,s=t.name,m=(0,a.qm)(t.id),p=(0,a.gN)(t.id),u=!1):(l=!1,s=t.name||t.link,m=t.link,p=t.link,u=!0);let f,v,g="a11y__modal modal-image file-preview-modal",_="";if(this.state.loaded[this.state.imageIndex])i===c.ml.IMAGE||i===c.ml.SVG?f=n.createElement(b,{fileInfo:t,canDownloadFiles:this.props.canDownloadFiles}):i===c.ml.VIDEO||i===c.ml.AUDIO?f=n.createElement(E,{fileInfo:t,fileUrl:m}):i===c.ml.PDF?(_=" file-preview-modal__content-scrollable",f=n.createElement("div",{className:"file-preview-modal__scrollable",onClick:this.handleBgClose},n.createElement(n.Suspense,{fallback:null},n.createElement(ee,{fileInfo:t,fileUrl:m,scale:this.state.scale[this.state.imageIndex],handleBgClose:this.handleBgClose}))),v=n.createElement(K,{scale:this.state.scale[this.state.imageIndex],showZoomControls:this.state.showZoomControls,handleZoomIn:this.handleZoomIn,handleZoomOut:this.handleZoomOut,handleZoomReset:this.handleZoomReset})):w.supports(t)?(g+=" modal-code",f=n.createElement(w,{fileInfo:t,fileUrl:m,className:"file-preview-modal__code-preview"})):f=n.createElement(h.Z,{fileInfo:t,fileUrl:m});else{const e=d._u("view_image.loading","Loading"),t=Math.floor(this.state.progress[this.state.imageIndex]);f=n.createElement(r.Z,{loading:e,progress:t})}if(M(t))for(const e of this.props.pluginFilePreviewComponents)if(e.override(t,this.props.post)){f=n.createElement(e.component,{fileInfo:t,post:this.props.post});break}return n.createElement(o.Z,{show:this.state.show,onHide:this.handleModalClose,onExited:this.props.onExited,className:"modal-image file-preview-modal",dialogClassName:g,animation:!0,backdrop:!1,role:"dialog",style:{paddingLeft:0},"aria-labelledby":"viewImageModalLabel"},n.createElement(o.Z.Body,{className:"file-preview-modal__body"},n.createElement("div",{className:"modal-image__wrapper",onClick:this.handleModalClose},n.createElement("div",{className:"file-preview-modal__main-ctr",onMouseEnter:this.onMouseEnterImage,onMouseLeave:this.onMouseLeaveImage,onClick:e=>e.stopPropagation()},n.createElement(o.Z.Title,{componentClass:"div",id:"viewImageModalLabel",className:"file-preview-modal__title"},n.createElement(z,{isMobileView:this.props.isMobileView,post:this.props.post,showPublicLink:l,fileIndex:this.state.imageIndex,totalFiles:null===(e=this.props.fileInfos)||void 0===e?void 0:e.length,filename:s,fileURL:p,fileInfo:t,enablePublicLink:this.props.enablePublicLink,canDownloadFiles:this.props.canDownloadFiles,isExternalFile:u,handlePrev:this.handlePrev,handleNext:this.handleNext,handleModalClose:this.handleModalClose}),v),n.createElement("div",{className:"file-preview-modal__content"+_,onClick:this.handleBgClose},f),this.props.isMobileView&&n.createElement(A,{post:this.props.post,showPublicLink:l,filename:s,fileURL:p,fileInfo:t,enablePublicLink:this.props.enablePublicLink,canDownloadFiles:this.props.canDownloadFiles,isExternalFile:u,handleModalClose:this.handleModalClose})))))}}$(ie,"propTypes",{canDownloadFiles:s().bool.isRequired,enablePublicLink:s().bool.isRequired,isMobileView:s().bool.isRequired,pluginFilePreviewComponents:s().array,onExited:s().func.isRequired,postId:s().string,startIndex:s().number}),$(ie,"defaultProps",{fileInfos:[],startIndex:0,pluginFilePreviewComponents:[]})}}]);
//# sourceMappingURL=716.67db23df5d0e7d616bbd.js.map