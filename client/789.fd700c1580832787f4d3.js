(self.webpackChunk_mattermost_webapp=self.webpackChunk_mattermost_webapp||[]).push([[789],{53066:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u}),r(33948);var n=r(67294),o=r(45697),i=r.n(o);const s=["children","element","hasMore","initialLoad","loader","loadMore","pageStart","threshold","useWindow","isReverse","scrollPosition","containerHeight"];function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends n.PureComponent{constructor(){super(...arguments),l(this,"scrollListener",(()=>{const e=this.scrollComponent,t=window;let r;if(this.props.useWindow){var n="pageYOffset"in t?t.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;r=this.props.isReverse?n:this.calculateTopPosition(e)+(e.offsetHeight-n-window.innerHeight)}else r=this.props.isReverse?e.parentNode.scrollTop:e.scrollHeight-e.parentNode.scrollTop-e.parentNode.clientHeight;r<Number(this.props.threshold)&&(this.detachScrollListener(),"function"==typeof this.props.loadMore&&this.props.loadMore(this.pageLoaded+=1))}))}componentDidMount(){this.pageLoaded=this.props.pageStart,this.attachScrollListener(),this.setScrollPosition()}componentDidUpdate(){this.attachScrollListener()}render(){const e=this.props,{children:t,element:r,hasMore:o,initialLoad:i,loader:a,loadMore:l,pageStart:u,threshold:p,useWindow:h,isReverse:d,scrollPosition:f,containerHeight:g}=e,m=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s);m.ref=e=>{this.scrollComponent=e};const y=g?c(c({},m),{},{style:{height:g}}):m;return n.createElement(r,y,t,o&&(a||this.defaultLoader))}calculateTopPosition(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}setScrollPosition(){const{scrollPosition:e}=this.props;null!==e&&window.scrollTo(0,e)}attachScrollListener(){if(!this.props.hasMore)return;let e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.addEventListener("scroll",this.scrollListener),e.addEventListener("resize",this.scrollListener),this.props.initialLoad&&this.scrollListener()}detachScrollListener(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("scroll",this.scrollListener),e.removeEventListener("resize",this.scrollListener)}componentWillUnmount(){this.detachScrollListener()}setDefaultLoader(e){this.defaultLoader=e}}l(u,"propTypes",{children:i().array,element:i().string,hasMore:i().bool,initialLoad:i().bool,loader:i().object,loadMore:i().func.isRequired,pageStart:i().number,threshold:i().number,useWindow:i().bool,isReverse:i().bool,containerHeight:i().number,scrollPosition:i().number}),l(u,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,threshold:250,useWindow:!0,isReverse:!1,containerHeight:null,scrollPosition:null})},11789:(e,t,r)=>{"use strict";r.r(t),r.d(t,{appProps:()=>Ze,default:()=>ze}),r(74916),r(15306);var n=r(67294),o=r(45697),i=r.n(o),s=r(14494),a=(r(64765),r(88674),r(85827),r(33948),r(7039)),c=r(53473),l=r(62540),u=r.n(l);let p=null,h=null,d=null;function f(e,t){return d&&p===e&&h===t?d:e&&t?(p=e,h=t,d=new(u())({client_id:e,client_secret:t}),d):(d=new(u())({client_id:"2_KtH_W5",client_secret:"3wLVZPiswc3DnaiaFoLkDvB4X0IV6CpMkj4tf2inJRsBY6-FnkT08zGmppWFgeof"}),d)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){return{type:a.rf.UPDATE_SEARCH_TEXT,searchText:e}}function C(e){return{type:a.rf.REQUEST_SEARCH,searchText:e}}function v(e){return{type:a.rf.RECEIVE_SEARCH_END,searchText:e}}function O(e,t){return{type:a.rf.SEARCH_FAILURE,searchText:t,err:e}}function P(e){let{searchText:t,count:r=30,startIndex:n=0}=e,o=n;return(e,n)=>{const{GfycatAPIKey:i,GfycatAPISecret:s}=n().entities.general.config,{resultsByTerm:l}=n().entities.gifs.search;l[t]&&(o=l[t].start+r),e(C(t));const u=f(i,s);return u.authenticate(),u.search({search_text:t,count:r,start:o}).then((i=>{if(i.errorMessage)l[t].items?e(v(t)):e(O(i,t));else{e(b(t)),e(A(i.gfycats)),e(function(e){let{searchText:t,count:r,start:n,json:o}=e;return m(m({type:a.rf.RECEIVE_SEARCH,searchText:t},o),{},{count:r,start:n,currentPage:n/r,receivedAt:Date.now()})}({searchText:t,count:r,start:o,json:i}));const s=n().entities.gifs.categories.tagsDict[t]?"category":"search";c.je.trackEvent("gfycat","views",{context:s,count:i.gfycats.length,keyword:t})}})).catch((r=>e(O(r,t))))}}function j(e){let{tagName:t="",gfyCount:r=30,cursorPos:n}=e,o=n;return async(e,n)=>{const{GfycatAPIKey:i,GfycatAPISecret:s}=n().entities.general.config,{resultsByTerm:l}=n().entities.gifs.search;return l[t]&&(o=l[t].cursor),e(C(t)),f(i,s).getTrendingCategories({tagName:t,gfyCount:r,cursor:o}).then((r=>{r.errorMessage?l[t].gfycats?e(v(t)):e(O(r,t)):(e(b(t)),e(A(r.gfycats)),e(function(e){let{tagName:t,json:r}=e;return m(m({type:a.rf.RECEIVE_CATEGORY_SEARCH,searchText:t},r),{},{receiveAt:Date.now()})}({tagName:t,json:r})),c.je.trackEvent("gfycat","views",{context:"category",count:r.gfycats.length,keyword:t}),"trending"===t&&e(_()))})).catch((r=>e(O(r,t))))}}function w(e){return(t,r)=>(t(b(e)),function(e,t){const r=e.entities.gifs.search.resultsByTerm[t];return!r||(r.isFetching,!1)}(r(),e)?"trending"===e.toLowerCase()?t(j({tagName:e})):t(P({searchText:e})):Promise.resolve())}function T(e){return t=>{t(function(e){return{type:a.rf.SAVE_SEARCH_SCROLL_POSITION,scrollPosition:e}}(e))}}function S(e){return t=>{t(b(e))}}function x(e){return t=>{t(function(e){return{type:a.rf.SAVE_SEARCH_BAR_TEXT,searchBarText:e}}(e))}}function E(){return{type:a.rf.REQUEST_CATEGORIES_LIST}}function L(e){return m({type:a.rf.CATEGORIES_LIST_RECEIVED},e)}function k(e){return{type:a.rf.CATEGORIES_LIST_FAILURE,err:e}}function I(){let{count:e=60}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,r)=>{const{GfycatAPIKey:n,GfycatAPISecret:o}=r().entities.general.config,i=r().entities.gifs.categories;if(!N(i))return Promise.resolve();t(E());const{cursor:s}=i,a=m(m({},e&&{count:e}),s&&{cursor:s});return f(n,o).getCategories(a).then((e=>{const r=e.tags.reduce(((e,t)=>t.gfycats[0]&&t.gfycats[0].width?[...e,...t.gfycats]:e),[]);t(A(r)),t(L(e))})).catch((e=>{t(k(e))}))}}function _(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{count:void 0};return(t,r)=>{const n=r().entities.gifs.categories;return n.tagsList&&n.tagsList.length?Promise.resolve():t(I({count:e}))}}function N(e){const{hasMore:t,isFetching:r,tagsList:n}=e;return!n||!n.length||!r&&!!t}function A(e){return async t=>(t({type:a.rf.CACHE_REQUEST,payload:{updating:!0}}),t(function(e){return{type:a.rf.CACHE_GIFS,gifs:e}}(e)),{data:!0})}var D=r(89754),H=r(71170);const M=0,R=1;r(23123),r(73210);class q extends n.PureComponent{render(){return n.createElement("span",this.props,n.createElement("svg",{width:"100%",height:"100%",viewBox:"-10 -10 40 40",version:"1.1"},n.createElement("g",{id:"ic_search",transform:"matrix(0.959095,-9.6091e-18,-1.00189e-17,0.959095,-0.0633002,-0.777826)"},n.createElement("path",{d:"M2.648,15.872C3.433,16.658 4.376,17.287 5.454,17.758C6.553,18.229 7.698,18.454 8.888,18.454C10.728,18.454 12.389,17.938 13.893,16.905L18.18,21.192C18.494,21.506 18.854,21.664 19.302,21.664C19.751,21.664 20.111,21.506 20.447,21.192C20.761,20.855 20.919,20.496 20.919,20.047C20.919,19.621 20.761,19.239 20.447,18.925L16.16,14.638C17.193,13.134 17.709,11.473 17.709,9.633C17.709,8.443 17.484,7.298 17.013,6.198C16.542,5.121 15.913,4.178 15.128,3.393C14.342,2.607 13.399,1.979 12.322,1.507C11.222,1.036 10.077,0.811 8.888,0.811C7.698,0.811 6.553,1.036 5.454,1.507C4.376,1.979 3.433,2.607 2.648,3.393C1.862,4.178 1.234,5.121 0.762,6.198C0.291,7.298 0.066,8.443 0.066,9.633C0.066,10.822 0.291,11.967 0.762,13.067C1.234,14.144 1.862,15.087 2.648,15.872ZM8.888,4.021C10.436,4.021 11.761,4.56 12.861,5.66C13.96,6.76 14.499,8.084 14.499,9.633C14.499,11.181 13.96,12.506 12.861,13.606C11.761,14.705 10.436,15.244 8.888,15.244C7.339,15.244 6.015,14.705 4.915,13.606C3.815,12.506 3.276,11.181 3.276,9.633C3.276,8.084 3.815,6.76 4.915,5.66C6.015,4.56 7.339,4.021 8.888,4.021Z",style:{fill:"inherit"}}))))}}class B extends n.PureComponent{render(){return n.createElement("span",this.props,n.createElement("svg",{width:"100%",height:"100%",viewBox:"-10 -10 40 40",enableBackground:"new 0 0 20 20",version:"1.1"},n.createElement("g",{transform:"matrix(0.952381,0,0,1,0,0)"},n.createElement("path",{fill:"inherit",d:"M10.5 11.7L2.2 19.8C2 19.9 1.9 20 1.7 20 1.6 20 1.4 19.9 1.3 19.8L0.2 18.8C0.1 18.7 0 18.5 0 18.3 0 18.2 0.1 18 0.2 17.9L8.3 10 0.2 2.1C0.1 2 0 1.8 0 1.7 0 1.5 0.1 1.3 0.2 1.2L1.3 0.2C1.4 0.1 1.6 0 1.7 0 1.9 0 2 0.1 2.2 0.2L10.5 8.3 18.8 0.2C19 0.1 19.1 0 19.3 0 19.4 0 19.6 0.1 19.7 0.2L20.8 1.2C20.9 1.3 21 1.5 21 1.7 21 1.8 20.9 2 20.8 2.1L12.7 10 20.8 17.9C20.9 18 21 18.2 21 18.3 21 18.5 20.9 18.7 20.8 18.8L19.7 19.8C19.6 19.9 19.4 20 19.3 20 19.1 20 19 19.9 18.8 19.8L10.5 11.7Z"}))))}}var G=r(927),U=r(82251);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Z={saveSearchBarText:x,saveSearchScrollPosition:T,searchTextUpdate:S},z=(0,H.$Y)((e=>({background:{backgroundColor:e.centerChannelBg},icon:{fill:(0,H.v5)(e.centerChannelColor,.4)},inputBackground:{backgroundColor:e.centerChannelBg},input:{borderColor:(0,H.v5)(e.centerChannelColor,.12)}})));class Q extends n.Component{constructor(e){super(e),V(this,"parseSearchText",(e=>e.trim().split(/ +/).join("-"))),V(this,"removeExtraSpaces",(e=>e.trim().split(/ +/).join(" "))),V(this,"updateSearchInputValue",(e=>{this.searchInput.value=e,this.props.saveSearchBarText(e),this.props.handleSearchTextChange(e)})),V(this,"handleSubmit",(e=>{e.preventDefault(),this.triggerSearch(this.searchInput.value),this.searchInput.blur()})),V(this,"triggerSearch",(e=>{const{onSearch:t}=this.props;this.props.searchTextUpdate(this.parseSearchText(e)),t(),this.props.saveSearchScrollPosition(0)})),V(this,"handleChange",(e=>{clearTimeout(this.searchTimeout);const t=e.target.value,{onCategories:r,action:n}=this.props;this.props.saveSearchBarText(t),this.props.handleSearchTextChange(t),""===t?r():"reactions"===n&&this.isFilteredTags(t)||(this.searchTimeout=setTimeout((()=>{this.triggerSearch(t)}),500))})),V(this,"focusInput",(()=>{this.setState({inputFocused:!0})})),V(this,"blurInput",(()=>{this.setState({inputFocused:!1})})),V(this,"isFilteredTags",(e=>{var t=this.removeExtraSpaces(e);const{tagsList:r}=this.props,n=t.toLowerCase(),o=r&&r.length?r.filter((e=>t&&-1===e.tagName.indexOf(n)?"":e)):[];return Boolean(o.length)})),V(this,"clearSearchHandle",(()=>{const{action:e,onTrending:t,onCategories:r}=this.props;this.updateSearchInputValue(""),"reactions"===e?r():t()})),this.state={inputFocused:!1},this.searchTimeout=null;const t=this.props.defaultSearchText||"";this.props.saveSearchBarText(t),this.props.searchTextUpdate(t)}componentDidUpdate(e){const{searchBarText:t}=this.props;t!==e.searchBarText&&("trending"===t?this.updateSearchInputValue(""):this.updateSearchInputValue(t))}shouldComponentUpdate(e,t){return!e.searchBarText&&this.props.searchBarText||e.searchBarText&&!this.props.searchBarText||t.inputFocused!==this.state.inputFocused||e.searchBarText!==this.props.searchBarText}render(){const e=z(this.props.theme),{searchBarText:t}=this.props,r=t?n.createElement(B,{className:"ic-clear-search",style:e.icon,onClick:this.clearSearchHandle}):null;return n.createElement("form",{className:"gfycat-search",method:"get",target:"_top",noValidate:"",onSubmit:this.handleSubmit},n.createElement("div",{className:"search-bar",style:e.background},n.createElement("div",{className:"search-input-bg",style:e.inputBackground}),n.createElement(G.Z,{className:"search-input",name:"searchText",autoFocus:!0,placeholder:{id:(0,U.t)("gif_picker.gfycat"),defaultMessage:"Search Gfycat"},onChange:this.handleChange,autoComplete:"off",autoCapitalize:"off",onFocus:this.focusInput,onBlur:this.blurInput,ref:e=>(this.searchInput=e,e),style:e.input,value:t}),n.createElement(q,{className:"ic ic-search",style:e.icon}),r),n.createElement("button",{type:"submit",className:"submit-button"}))}}V(Q,"propTypes",{searchBarText:i().string,tagsList:i().array,theme:i().object.isRequired,onTrending:i().func,onSearch:i().func,onCategories:i().func,action:i().string,saveSearchScrollPosition:i().func,saveSearchBarText:i().func,searchTextUpdate:i().func,defaultSearchText:i().string,handleSearchTextChange:i().func.isRequired});const K=(0,s.connect)((function(e){return W(W(W({},e.entities.gifs.categories),e.entities.gifs.search),{},{theme:(0,D.gh)(e),appProps:e.entities.gifs.app})}),Z)(Q);class Y extends n.PureComponent{render(){return n.createElement("span",this.props,n.createElement("svg",{className:"ic-svg ic-trending-svg",width:"11px",height:"15px",viewBox:"0 0 11 15",version:"1.1"},n.createElement("g",{id:"Finalized-Design",stroke:"none",fill:"inherit"},n.createElement("g",{id:"GfyCat---Gycat-Tab",transform:"translate(-1212.000000, -619.000000)",fill:"inherit"},n.createElement("g",{id:"modal---emojis",transform:"translate(1147.000000, 542.000000)"},n.createElement("g",{id:"tabs---gfycat",transform:"translate(1.000000, 68.000000)"},n.createElement("g",{id:"tab---trending---selected"},n.createElement("path",{d:"M69.90625,10.4062776 C69.90625,10.9531513 70.0976562,11.4909106 70.4804688,12.019555 C70.6992188,12.32945 71.1276043,12.7760638 71.765625,13.3593956 C72.3489582,13.9062693 72.7773438,14.3346538 73.0507812,14.6445488 C73.5065106,15.1731932 73.8528644,15.7109525 74.0898438,16.2578262 C74.3632812,16.9505327 74.5,17.6979271 74.5,18.5000083 C74.5,19.4479229 74.2630207,20.3229208 73.7890625,21.1250021 C73.3151043,21.9270834 72.6770832,22.565103 71.875,23.03906 C71.0729168,23.5130171 70.1979168,23.7499958 69.25,23.7499958 C68.3020832,23.7499958 67.4270832,23.5130171 66.625,23.03906 C65.8229168,22.565103 65.1848957,21.9270834 64.7109375,21.1250021 C64.2369793,20.3229208 64,19.4479229 64,18.5000083 C64,17.6432397 64.2005207,16.8320436 64.6015625,16.0664204 C65.0026043,15.3007972 65.5494793,14.6718925 66.2421875,14.1797061 C66.4609375,14.0338733 66.6888019,14.0247585 66.9257812,14.1523625 C67.1627606,14.2799665 67.28125,14.4713723 67.28125,14.7265798 L67.28125,17.6250104 C67.28125,17.9349054 67.3860676,18.1946704 67.5957031,18.4043054 C67.8053387,18.6139405 68.0651043,18.7187578 68.375,18.7187578 C68.6848957,18.7187578 68.9446613,18.6139405 69.1542969,18.4043054 C69.3639324,18.1946704 69.46875,17.9349054 69.46875,17.6250104 C69.46875,17.4427191 69.4049481,17.2330844 69.2773438,16.9961057 C69.2044269,16.8320436 69.0677082,16.576836 68.8671875,16.2304825 C68.4661457,15.5742341 68.1835938,15.0547041 68.0195312,14.6718925 C67.7643231,13.9791859 67.6640625,13.2955938 67.71875,12.6211161 C67.8098957,11.7825763 68.1380207,10.9258077 68.703125,10.0508097 C68.8125,9.86851837 68.9628906,9.76825847 69.1542969,9.75002921 C69.3457031,9.73179994 69.5188801,9.78648731 69.6738281,9.91409132 C69.8287762,10.0416953 69.90625,10.2057574 69.90625,10.4062776 Z M69.2499875,22.437499 C69.9609233,22.437499 70.6171717,22.259765 71.2187328,21.9042971 C71.8202939,21.5488292 72.2988083,21.0703147 72.6542762,20.4687537 C73.0097441,19.8671926 73.1874781,19.2109441 73.1874781,18.5000083 C73.1874781,17.880218 73.0781034,17.3060006 72.8593539,16.7773562 C72.6588337,16.3398572 72.376282,15.9023583 72.0116996,15.4648593 C71.7929502,15.1914225 71.4329248,14.8131683 70.9316241,14.3300964 C70.4303233,13.8470245 70.070298,13.4687703 69.8515485,13.1953335 C69.4869662,12.7760638 69.2135294,12.3567937 69.031238,11.937524 C68.8671759,12.5573143 68.8945196,13.1953335 69.1132691,13.8515819 C69.2408731,14.2343935 69.5143099,14.7812672 69.9335796,15.492203 C70.2252457,15.9661601 70.4166515,16.321628 70.507797,16.5586067 C70.6900884,16.9414183 70.7812338,17.2968862 70.7812338,17.6250104 C70.7812338,18.2812589 70.5442551,18.8463618 70.070298,19.3203189 C69.596341,19.794276 69.031238,20.0312547 68.3749896,20.0312547 C67.7187411,20.0312547 67.1536382,19.794276 66.6796811,19.3203189 C66.205724,18.8463618 65.9687453,18.2812589 65.9687453,17.6250104 L65.9687453,16.0937641 C65.7682251,16.403659 65.60872,16.7819136 65.4902308,17.228527 C65.3717417,17.6751404 65.3124969,18.0989675 65.3124969,18.5000083 C65.3124969,19.2109441 65.4902308,19.8671926 65.8456987,20.4687537 C66.2011666,21.0703147 66.6796811,21.5488292 67.2812422,21.9042971 C67.8828032,22.259765 68.5390517,22.437499 69.2499875,22.437499 Z",id:"icon---trending"}))))))))}}class X extends n.PureComponent{render(){return n.createElement("span",this.props,n.createElement("svg",{className:"ic-svg ic-reactions-svg",width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1"},n.createElement("g",{id:"Finalized-Design",stroke:"none",fill:"inherit"},n.createElement("g",{id:"GfyCat---Gycat-Tab",transform:"translate(-1348.000000, -620.000000)",fill:"inherit"},n.createElement("g",{id:"modal---emojis",transform:"translate(1147.000000, 542.000000)"},n.createElement("g",{id:"tabs---gfycat",transform:"translate(1.000000, 68.000000)"},n.createElement("g",{id:"tab---category---deselected",transform:"translate(138.000000, 0.000000)"},n.createElement("path",{d:"M62,16 L62,10 L68,10 L68,16 L62,16 Z M64,12 L64,14 L66,14 L66,12 L64,12 Z M70,24 L70,18 L76,18 L76,24 L70,24 Z M72,20 L72,22 L74,22 L74,20 L72,20 Z M70,10 L76,10 L76,16 L70,16 L70,10 Z M74,14 L74,12 L72,12 L72,14 L74,14 Z M62,24 L62,18 L68,18 L68,24 L62,24 Z M64,20 L64,22 L66,22 L66,20 L64,20 Z",id:"icon---categories"}))))))))}}const $={saveSearchBarText:x,searchTextUpdate:S},J=(0,H.$Y)((e=>({background:{backgroundColor:e.centerChannelBg},header:{borderBottomColor:(0,H.v5)(e.centerChannelColor,.2)},icon:{fill:(0,H.v5)(e.centerChannelColor,.3)},iconActive:{fill:e.centerChannelColor},iconHover:{fill:(0,H.v5)(e.centerChannelColor,.8)}})));class ee extends n.PureComponent{constructor(e){super(e),this.state={hovering:""}}render(){const e=J(this.props.theme);return n.createElement("header",{className:"header-container",style:e.background},n.createElement(K,this.props),n.createElement("nav",{className:"nav-bar",style:e.header},this.renderTabs(this.props,e)))}renderTabs(e,t){const{appProps:r,onTrending:n,onCategories:o}=e,{header:i}=r;return i.tabs.map(((e,r)=>{let i;return e===M?i=this.renderTab("trending",n,Y,r,t):e===R&&(i=this.renderTab("reactions",o,X,r,t)),i}))}renderTab(e,t,r,o,i){var s=this.props;const{action:a}=s;return n.createElement("a",{onClick:function(){s.searchTextUpdate(""),s.saveSearchBarText(""),t()},onMouseOver:()=>{this.setState({hovering:e})},onMouseOut:()=>{this.setState({hovering:""})},style:{cursor:"pointer"},key:o},n.createElement("div",{style:{paddingTop:"2px"}},n.createElement(r,{style:(()=>this.state.hovering===e?i.iconHover:a===e?i.iconActive:i.icon)()})))}}var te,re,ne;te=ee,re="propTypes",ne={action:i().string,appProps:i().object,saveSearchBarText:i().func,searchTextUpdate:i().func,theme:i().object.isRequired,defaultSearchText:i().string,handleSearchTextChange:i().func.isRequired},re in te?Object.defineProperty(te,re,{value:ne,enumerable:!0,configurable:!0,writable:!0}):te[re]=ne;const oe=(0,s.connect)((function(e){return{theme:(0,D.gh)(e)}}),$)(ee),ie={saveAppProps:function(e){return(t,r)=>{const{GfycatAPIKey:n,GfycatAPISecret:o}=r().entities.general.config;var i;f(n,o).authenticate(),t((i=e,{type:a.rf.SAVE_APP_PROPS,props:i}))}}};class se extends n.PureComponent{constructor(e){super(e);const{appProps:t}=this.props;this.props.saveAppProps(t)}render(){const{appProps:e,action:t,onCategories:r,onSearch:o,onTrending:i,children:s,defaultSearchText:a,handleSearchTextChange:c}=this.props,l="main-container "+(e.appClassName||"");return n.createElement("div",{className:l},n.createElement(oe,{appProps:e,action:t,onCategories:r,onSearch:o,onTrending:i,defaultSearchText:a,handleSearchTextChange:c}),n.createElement("div",{className:"component-container"},s))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(se,"propTypes",{appProps:i().object,action:i().string,onCategories:i().func,onSearch:i().func,onTrending:i().func,children:i().object,saveAppProps:i().func,authenticateSdk:i().func,defaultSearchText:i().string,handleSearchTextChange:i().func.isRequired});const ae=(0,s.connect)(null,ie)(se);var ce=r(59925),le=r(81735),ue=r(53066);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const fe={saveSearchBarText:x,saveSearchScrollPosition:T,searchTextUpdate:S,requestCategoriesList:I,requestCategoriesListIfNeeded:_};class ge extends n.PureComponent{constructor(){super(...arguments),de(this,"sendImpressions",(()=>{const{tagsList:e}=this.props,t=e.map((e=>({gfyId:e.gfyId})));t.length&&(0,ce.L9)("gfycat","views",{context:"category_list",count:t.length})})),de(this,"filterTagsList",(()=>{const{searchBarText:e,tagsList:t}=this.props,r=e.toLowerCase().trim().split(/ +/).join(" ");return t&&t.length?t.filter((t=>e&&-1===t.tagName.indexOf(r)?"":t)):[]})),de(this,"loadMore",(()=>{this.props.requestCategoriesList()}))}componentDidMount(){window.scrollTo(0,0),this.props.requestCategoriesListIfNeeded(),this.sendImpressions()}componentWillUnmount(){this.props.saveSearchScrollPosition(0)}render(){const{hasMore:e,tagsList:t,gifs:r,onSearch:o,onTrending:i,hasImageProxy:s}=this.props,a=t&&t.length?this.filterTagsList(t).map(((e,t)=>{const{tagName:a,gfyId:c}=e;if(!r[c])return null;const l=r[c],{max1mbGif:u,avgColor:p}=l,h=le.Q4(u,"true"===s),d=a.replace(/\s/g,"-"),f={backgroundImage:"url(".concat(h)},g={backgroundColor:p},m=this.props;return n.createElement("a",{onClick:function(){m.searchTextUpdate(a),m.saveSearchBarText(a),"trending"===d?i():o()},key:t},n.createElement("div",{className:"category-container"},n.createElement("div",{className:"category",style:he(he({},f),g)},n.createElement("div",{className:"category-name"},a))))})):[];return a&&a.length?n.createElement("div",{className:"categories-container"},n.createElement(ue.Z,{hasMore:e,loadMore:this.loadMore,threshold:1},a)):n.createElement("div",{className:"categories-container"})}}de(ge,"propTypes",{appProps:i().object,gifs:i().object,hasMore:i().bool,onSearch:i().func,onTrending:i().func,requestCategoriesList:i().func,requestCategoriesListIfNeeded:i().func,saveSearchBarText:i().func,saveSearchScrollPosition:i().func,searchTextUpdate:i().func,searchBarText:i().string,tagsList:i().array,hasImageProxy:i().string});const me=(0,s.connect)((function(e){return he(he(he({},e.entities.gifs.categories),e.entities.gifs.cache),{},{appProps:e.entities.gifs.app,searchText:e.entities.gifs.search.searchText,searchBarText:e.entities.gifs.search.searchBarText,hasImageProxy:e.entities.general.config.HasImageProxy})}),fe)(ge);var ye=r(23493),be=r.n(ye),Ce=(r(91058),r(28292)),ve=r(13516);function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class we extends n.PureComponent{render(){const{gfyItem:e,top:t,left:r,itemWidth:o,itemClickHandler:i}=this.props,{width:s,height:a,max1mbGif:c,avgColor:l}=e,{hasImageProxy:u}=this.props,p=le.Q4(c,"true"===u),h={backgroundImage:"url(".concat(p,")")},d={backgroundColor:l},f={paddingBottom:o/s*a+"px"};return n.createElement("div",{className:"search-item-wrapper",style:{top:t,left:r,width:o?"".concat(o,"px"):""}},n.createElement("div",{className:"search-item",style:Pe(Pe(Pe({},h),d),f),onClick:()=>i(e)}))}}je(we,"propTypes",{gfyItem:i().object,top:i().string,left:i().string,itemWidth:i().number,itemClickHandler:i().func,hasImageProxy:i().string});const Te=(0,s.connect)((function(e){return{hasImageProxy:e.entities.general.config.HasImageProxy}}))(we);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Le={saveSearchScrollPosition:T};class ke extends n.PureComponent{constructor(e){super(e),Ee(this,"setNumberOfColumns",(()=>{window.matchMedia("(orientation: portrait)").matches,this.numberOfColumns=2})),Ee(this,"itemClickHandler",(e=>{const{keyword:t,handleItemClick:r}=this.props;this.props.saveSearchScrollPosition(this.scrollPosition),(0,ce.L9)("gfycat","shares",{gfyid:e.gfyId,keyword:t}),r(e)})),Ee(this,"minHeightColumnIndex",(()=>this.columnsHeights.indexOf(Math.min(...this.columnsHeights)))),Ee(this,"maxHeightColumnIndex",(()=>this.columnsHeights.indexOf(Math.max(...this.columnsHeights)))),Ee(this,"maxColumnHeight",(()=>Math.max(...this.columnsHeights))),Ee(this,"resizeHandler",(()=>{this.state.containerWidth!==this.container.offsetWidth-8&&(this.setNumberOfColumns(),this.setState(xe(xe({},this.state),{},{containerWidth:this.container.offsetWidth-8})),this.columnsHeights=Array(this.numberOfColumns).fill(0))})),Ee(this,"scrollHandler",(()=>{this.scrollPosition=window.scrollY})),this.state={containerWidth:null},this.scrollPosition=this.props.scrollPosition,this.setNumberOfColumns(),this.columnsHeights=Array(this.numberOfColumns).fill(0),this.padding=8}componentDidMount(){this.container=document.getElementById("search-grid-container"),this.setState(xe(xe({},this.state),{},{containerWidth:this.container.offsetWidth-8})),window.addEventListener("resize",this.resizeHandler),window.addEventListener("scroll",this.scrollHandler)}componentDidUpdate(e){e.keyword!==this.props.keyword&&window.scrollTo(0,0)}componentWillUnmount(){const{keyword:e}=this.props;"trending"!==e&&this.props.saveSearchScrollPosition(this.scrollPosition),window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("scroll",this.scrollHandler)}render(){const{containerClassName:e,gifs:t,keyword:r,resultsByTerm:o,scrollPosition:i,loadMore:s}=this.props,{containerWidth:a}=this.state,{moreRemaining:c,items:l=[],isEmpty:u=0===l.length,isFetching:p}=o[r]?o[r]:{},h=parseInt(a/this.numberOfColumns,10),d=Array(this.numberOfColumns).fill(0).map(((e,t)=>this.padding+(t*h-t*(this.padding/2))));this.columnsHeights=Array(this.numberOfColumns).fill(this.padding);const f=a&&l.length?l.map(((e,r)=>{const o=t[e],{gfyId:i}=o,s=this.minHeightColumnIndex(),a=this.columnsHeights[s]+"px",c=d[s]+"px",l=140/o.width*o.height+this.padding;return this.columnsHeights[s]+=l,n.createElement(Te,{gfyItem:o,top:a,left:c,itemWidth:140,itemClickHandler:this.itemClickHandler,key:"".concat(r,"-").concat(i)})})):null;this.containerHeight=this.maxColumnHeight();const g=f?n.createElement(ue.Z,{className:"search-grid-infinite-scroll",pageStart:0,loadMore:s,initialLoad:!1,hasMore:c,threshold:1,containerHeight:this.containerHeight,scrollPosition:i,useWindow:!1},f):null,m=!p&&u?n.createElement(Ce.Z,{variant:ve.U.ChannelSearch,titleValues:{channelName:'"'.concat(r,'"')}}):null;return n.createElement("div",{id:"search-grid-container",className:"search-grid-container ".concat(e)},g,m)}}Ee(ke,"propTypes",{appProps:i().object,gifs:i().object,resultsByTerm:i().object,containerClassName:i().string,keyword:i().string,handleItemClick:i().func,loadMore:i().func,numberOfColumns:i().number,scrollPosition:i().number,saveSearchScrollPosition:i().func});const Ie=(0,s.connect)((function(e){return xe(xe(xe({},e.entities.gifs.cache),e.entities.gifs.search),{},{appProps:e.entities.gifs.app})}),Le)(ke);function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const De=(0,s.connect)((function(e){return Ne(Ne(Ne({},e.entities.gifs.cache),e.entities.gifs.search),{},{appProps:e.entities.gifs.app})}),(function(){return{saveSearchScrollPosition:T}}))(Ie);function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Re={searchGfycat:P,searchIfNeededInitial:w};class qe extends n.PureComponent{constructor(){super(...arguments),Me(this,"throttledSearchGif",be()((e=>this.props.searchIfNeededInitial(e.split("-").join(" "))),1e3)),Me(this,"loadMore",(()=>{const{searchText:e}=this.props;this.props.searchGfycat({searchText:e})}))}componentDidMount(){const{searchText:e}=this.props;this.props.searchIfNeededInitial(e.split("-").join(" "))}componentDidUpdate(e){const{searchText:t}=this.props;e.searchText!==t&&this.throttledSearchGif(t)}render(){const{handleItemClick:e,searchText:t,onCategories:r}=this.props;return n.createElement(De,{keyword:t,handleItemClick:e,onCategories:r,loadMore:this.loadMore})}}Me(qe,"propTypes",{handleItemClick:i().func,onCategories:i().func,searchText:i().string,searchIfNeededInitial:i().func,searchGfycat:i().func});const Be=(0,s.connect)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.entities.gifs.search)}),Re)(qe);function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ue={searchCategory:j,searchIfNeededInitial:w,saveSearchScrollPosition:T};class Fe extends n.PureComponent{constructor(){super(...arguments),Ge(this,"loadMore",(()=>{this.props.searchCategory({tagName:"trending"})}))}componentDidMount(){this.props.searchIfNeededInitial("trending")}componentWillUnmount(){this.props.saveSearchScrollPosition(0)}render(){const{handleItemClick:e,onCategories:t}=this.props;return n.createElement(De,{keyword:"trending",handleItemClick:e,onCategories:t,loadMore:this.loadMore})}}Ge(Fe,"propTypes",{handleItemClick:i().func,onCategories:i().func,searchCategory:i().func,searchIfNeededInitial:i().func,saveSearchScrollPosition:i().func});const We=(0,s.connect)(null,Ue)(Fe);function Ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ze={appName:"mattermost",basePath:"/mattermost",itemTapType:2,appClassName:"gfycat",shareEvent:"shareMattermost",appId:"mattermostwebviews",enableHistory:!0,header:{tabs:[M,R],displayText:!1}};class ze extends n.PureComponent{constructor(e){super(e),Ve(this,"handleTrending",(()=>{this.setState({action:"trending"})})),Ve(this,"handleCategories",(()=>{this.setState({action:"reactions"})})),Ve(this,"handleSearch",(()=>{this.setState({action:"search"})})),Ve(this,"handleItemClick",(e=>{this.props.onGifClick("!["+e.title.replace(/]|\[/g,"\\$&")+"]("+e.max5mbGif+")")}));const t=e.defaultSearchText?"search":"trending";this.state={action:t}}render(){const{action:e}=this.state;let t;switch(e){case"reactions":t=n.createElement(me,{appProps:Ze,onTrending:this.handleTrending,onSearch:this.handleSearch});break;case"search":t=n.createElement(Be,{appProps:Ze,onCategories:this.handleCategories,handleItemClick:this.handleItemClick});break;case"trending":t=n.createElement(We,{appProps:Ze,onCategories:this.handleCategories,handleItemClick:this.handleItemClick})}return n.createElement("div",null,n.createElement(ae,{appProps:Ze,action:e,onTrending:this.handleTrending,onCategories:this.handleCategories,onSearch:this.handleSearch,defaultSearchText:this.props.defaultSearchText,handleSearchTextChange:this.props.handleSearchTextChange},t))}}Ve(ze,"propTypes",{onGifClick:i().func.isRequired,defaultSearchText:i().string,handleSearchTextChange:i().func.isRequired})},62540:function(e){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/assets/",t(t.s=6)}([function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var i=e;return Array.isArray(e)&&!Array.isArray(r)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach((function(r,i){n.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],r,o):e.push(r):e[i]=r})),e):Object.keys(r).reduce((function(e,i){var s=r[i];return n.call(e,i)?e[i]=t.merge(e[i],s,o):e[i]=s,e}),i)},t.assign=function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var i=t.charCodeAt(n);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=t.charAt(n):i<128?r+=o[i]:i<2048?r+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?r+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),r+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return r},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],i=o.obj[o.prop],s=Object.keys(i),a=0;a<s.length;++a){var c=s[a],l=i[c];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:i,prop:c}),r.push(l))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],o=0;o<t.length;++o)void 0!==t[o]&&n.push(t[o]);r.obj[r.prop]=n}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,r){"use strict";var n=r(5),o=r(4),i=r(0);e.exports={formats:i,parse:o,stringify:n}},function(e,t){t.request=function(e,t,r){function n(e){clearTimeout(i),e=e||new Error("API request failed"),r(e)}var o=e.timeout||3e4,i=setTimeout((function(){s.abort(),r(new Error("API request exceeded timeout of",o))}),o),s=new XMLHttpRequest;s.addEventListener("error",n),s.addEventListener("abort",n),s.addEventListener("load",(function(e){if(clearTimeout(i),s.status>=400)return r(s.status);var n=s.response;try{n=JSON.parse(n),t(n)}catch(e){r(e)}})),s.open(e.request.method,e.request.url,!0);var a=e.request.headers||null;a&&Object.keys(a).forEach((function(e){s.setRequestHeader(e,a[e])}));var c=JSON.stringify(e.request.payload)||null;c?(s.setRequestHeader("Content-Type","application/json"),s.send(c)):s.send()}},function(e,t,r){"use strict";var n=r(1),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,a=n.split(t.delimiter,s),c=0;c<a.length;++c){var l,u,p=a[c],h=p.indexOf("]="),d=-1===h?p.indexOf("="):h+1;-1===d?(l=t.decoder(p,i.decoder),u=t.strictNullHandling?null:""):(l=t.decoder(p.slice(0,d),i.decoder),u=t.decoder(p.slice(d+1),i.decoder)),o.call(r,l)?r[l]=[].concat(r[l]).concat(u):r[l]=u}return r},a=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(n),a=s?n.slice(0,s.index):n,c=[];if(a){if(!r.plainObjects&&o.call(Object.prototype,a)&&!r.allowPrototypes)return;c.push(a)}for(var l=0;null!==(s=i.exec(n))&&l<r.depth;){if(l+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+n.slice(s.index)+"]"),function(e,t,r){for(var n=t,o=e.length-1;o>=0;--o){var i,s=e[o];if("[]"===s)i=(i=[]).concat(n);else{i=r.plainObjects?Object.create(null):{};var a="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(a,10);!isNaN(c)&&s!==a&&String(c)===a&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(i=[])[c]=n:i[a]=n}n=i}return n}(c,t,r)}};e.exports=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===e||null==e)return r.plainObjects?Object.create(null):{};for(var o="string"==typeof e?s(e,r):e,c=r.plainObjects?Object.create(null):{},l=Object.keys(o),u=0;u<l.length;++u){var p=l[u],h=a(p,o[p],r);c=n.merge(c,h,r)}return n.compact(c)}},function(e,t,r){"use strict";var n=r(1),o=r(0),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,a={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,r,o,i,s,c,l,u,p,h,d,f){var g=t;if("function"==typeof l)g=l(r,g);else if(g instanceof Date)g=h(g);else if(null===g){if(i)return c&&!f?c(r,a.encoder):r;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||n.isBuffer(g))return c?[d(f?r:c(r,a.encoder))+"="+d(c(g,a.encoder))]:[d(r)+"="+d(String(g))];var m,y=[];if(void 0===g)return y;if(Array.isArray(l))m=l;else{var b=Object.keys(g);m=u?b.sort(u):b}for(var C=0;C<m.length;++C){var v=m[C];s&&null===g[v]||(y=Array.isArray(g)?y.concat(e(g[v],o(r,v),o,i,s,c,l,u,p,h,d,f)):y.concat(e(g[v],r+(p?"."+v:"["+v+"]"),o,i,s,c,l,u,p,h,d,f)))}return y};e.exports=function(e,t){var r=e,s=t?n.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&"function"!=typeof s.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===s.delimiter?a.delimiter:s.delimiter,u="boolean"==typeof s.strictNullHandling?s.strictNullHandling:a.strictNullHandling,p="boolean"==typeof s.skipNulls?s.skipNulls:a.skipNulls,h="boolean"==typeof s.encode?s.encode:a.encode,d="function"==typeof s.encoder?s.encoder:a.encoder,f="function"==typeof s.sort?s.sort:null,g=void 0!==s.allowDots&&s.allowDots,m="function"==typeof s.serializeDate?s.serializeDate:a.serializeDate,y="boolean"==typeof s.encodeValuesOnly?s.encodeValuesOnly:a.encodeValuesOnly;if(void 0===s.format)s.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,s.format))throw new TypeError("Unknown format option provided.");var b,C,v=o.formatters[s.format];"function"==typeof s.filter?r=(C=s.filter)("",r):Array.isArray(s.filter)&&(b=C=s.filter);var O,P=[];if("object"!=typeof r||null===r)return"";O=s.arrayFormat in i?s.arrayFormat:"indices"in s?s.indices?"indices":"repeat":"indices";var j=i[O];b||(b=Object.keys(r)),f&&b.sort(f);for(var w=0;w<b.length;++w){var T=b[w];p&&null===r[T]||(P=P.concat(c(r[T],T,j,u,p,h?d:null,C,f,g,m,v,y)))}var S=P.join(l),x=!0===s.addQueryPrefix?"?":"";return S.length>0?x+S:""}},function(e,t,r){function n(e,t){if(t)return t(e);if(a)return Promise.reject(e);throw new Error(e)}var o=r(2),i=r(3),s="/v1",a="undefined"!=typeof Promise,c=function(e){if("object"==typeof e&&e.hasOwnProperty("client_id")&&e.hasOwnProperty("client_secret"))this.client_id=e.client_id,this.client_secret=e.client_secret,this.timeout=e.timeout||3e4;else{if(void 0!==e&&e)throw new Error("Please provide a valid options object with client_id and client_secret.");console.error("Although some of our API endpoints can be used without an API key, in order to get the best experience, we strongly recommend that you obtain an API key and initialize this SDK with the provided client_id and client_secret. Get your API key today by visiting https://developers.gfycat.com/signup"),s="/v1test"}this.apiUrl="https://api.gfycat.com"+s,this.retryLimit=2};c.prototype={authenticate:function(e,t){if(e||(e={}),!(this.client_id||this.client_secret||e.client_id||e.client_secret))return n("Please provide client_id and client_secret in options",t);e={api:"/oauth",endpoint:"/token",method:"POST",payload:{client_id:e.client_id||this.client_id,client_secret:e.client_secret||this.client_secret,grant_type:e.grant_type||"client_credentials"}};var r=this;return t?this._request(e,(function(e,n){e?t(e):(r._setToken(n),t(null,n))})):this._request(e).then((function(e){r._setToken(e),Promise.resolve(e)})).catch((function(e){Promise.reject(e)}))},getCategories:function(e,t){return e||(e={}),this._request({api:"/reactions",endpoint:"/populated",method:"GET",query:{gfyCount:e.gfyCount||1,count:e.count||null,cursor:e.cursor||null,locale:e.locale||null}},t)},getTrendingCategories:function(e,t){return e||(e={}),this._request({api:"/reactions",endpoint:"/populated",method:"GET",query:{gfyCount:e.gfyCount||1,cursor:e.cursor||null,tagName:e.tagName||"trending"}},t)},getTrending:function(e,t){return e||(e={}),this._request({api:"/gfycats",endpoint:"/trending",method:"GET",query:{count:e.count||100,cursor:e.cursor||null,tagName:e.tagName||null}},t)},getTrendingTags:function(e,t){return e||(e={}),this._request({api:"/tags",endpoint:"/trending",method:"GET"},t)},getTrendingTagsPopulated:function(e,t){return e||(e={}),this._request({api:"/tags",endpoint:"/trending/populated",method:"GET",query:{count:e.count||100,cursor:e.cursor||null,gfyCount:e.gfyCount||1}},t)},search:function(e,t){return this._request({api:"/gfycats",endpoint:"/search",method:"GET",query:{search_text:e.search_text,count:e.count||100,start:e.start||null,cursor:e.cursor||null}},t)},searchById:function(e,t){return this._request({api:"/gfycats",endpoint:"/"+e.id,method:"GET"},t)},getRelatedContent:function(e,t){return this._request({api:"/gfycats",endpoint:"/"+e.id+"/related",method:"GET",query:{cursor:e.cursor,count:e.count,from:e.from}},t)},artifacts:function(e,t){return this._request({api:"/gifartifacts",endpoint:"",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",payload:{uploadKey:e.uploadKey,tags:e.tags}},t)},stickers:function(e,t){return this._request({api:"/stickers",endpoint:e.search_text?"/search":"",method:"GET",query:{cursor:e.cursor,count:e.count,search_text:e.search_text}})},_request:function(e,t){if(!t&&!a)throw new Error("Callback must be provided if promises are unavailable");if(void 0===e||!e)return n("Please provide valid options object",t);var r=e.counter||0;if(r>=this.retryLimit){if(!t)return Promise.reject("Retry limit reached");n("Retry limit reached",t)}this.access_token&&(this.access_token,1)&&(void 0===e.headers&&(e.headers={}),e.headers.Authorization=this.access_token);var s="";if("object"==typeof e.query&&Object.keys(e.query).length){for(var c in e.query)null==e.query[c]&&delete e.query[c];s="?"+o.stringify(e.query)}var l={request:{headers:e.headers||null,method:e.method,payload:e.payload||null,url:this.apiUrl+e.api+e.endpoint+s},timeout:e.timeout||this.timeout},u=this;if(!t)return new Promise((function(e,t){i.request(l,e,t)})).then((function(e){return Promise.resolve(e)})).catch((function(t){return 401===t&&"/oauth"!==e.api?u.authenticate({}).then((function(t){return e.counter=r+1,u._request(e)})).catch((function(e){return Promise.reject(e)})):Promise.reject(t)}));i.request(l,(function(e){t(null,e)}),(function(n){401===n&&"/oauth"!==e.api?u.authenticate({},(function(n,o){if(!n)return e.counter=r+1,u._request(e,t);t(n)})):t(n)}))},_setToken:function(e){this.access_token=e.access_token,this.token_type=e.token_type}},e.exports=c}])}}]);
//# sourceMappingURL=789.fd700c1580832787f4d3.js.map